{% include "dashboard/login_header.html" %}
{% load static %}
<!-- PASSWORD RESET SECTION -->
<div class="section">
    <div class="container">
        <div class="login-container">
            {% if validlink %}
                <div class="login-header" style="color: #FFF;">
                    <h2>Reset Your Password</h2>
                    <p>Enter a new password below.</p>
                </div>
                <div class="login-body">
                    {% if form.errors %}
                        <div class="alert alert-danger" style="margin-bottom: 20px;">
                            <ul id="form_errors">
                                {% for key, value in form.errors.items %}
                                    <li>
                                        <strong>{{ value }}</strong>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                    <form method="POST">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="id_new_password1">New Password</label>
                            <input type="password"
                                   name="new_password1"
                                   autocomplete="new-password"
                                   class="input"
                                   required
                                   id="id_new_password1"
                                   placeholder="Enter new password" />
                        </div>
                        <div class="form-group">
                            <label for="id_new_password2">Confirm New Password</label>
                            <input type="password"
                                   name="new_password2"
                                   autocomplete="new-password"
                                   required
                                   id="id_new_password2"
                                   class="input"
                                   placeholder="Confirm new password" />
                        </div>
                        <div class="form-group">
                            <button type="submit" class="primary-btn" style="width: 100%;">Reset Password</button>
                        </div>
                    </form>
                </div>
            {% else %}
                <div class="login-header" style="color: #FFF;">
                    <h2>Invalid Link</h2>
                </div>
                <div class="login-body">
                    <div class="alert alert-warning" style="margin-bottom: 20px;">
                        The password reset link is invalid or has already been used.
                        Please <a href="{% url 'password_reset' %}">request a new one</a>.
                    </div>
                    <div class="form-group">
                        <a href="{% url 'login-view' %}" class="primary-btn" style="width: 100%">Back to Login</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>
<!-- /PASSWORD RESET SECTION -->
{% include "dashboard/footnote.html" %}
